{"ast":null,"code":"var _jsxFileName = \"D:\\\\react_crash_course\\\\frontend\\\\src\\\\components\\\\forecastval.jsx\";\nimport React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Table from \"./table\";\nimport \"./table.css\";\n\nclass ForecastVal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      x: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\n      y: [\"ud\", \"ud\", \"ud\", \"ud\", \"ud\"],\n      data: this.props.data,\n      response: {\n        val: null,\n        message: null\n      }\n    };\n    this.data = this.props.data;\n    this.res = {\n      \"val\": null,\n      message: null\n    };\n\n    this.getData = event => {\n      var keys = Object.keys(this.props.data);\n      var len = keys.length;\n      Object.values; // console.log(this.props.data)\n      // console.log(len)\n\n      if (len < 7) {\n        this.res.message = \"Not enough data to forecast\";\n      } else {\n        const sortObject = o => Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {});\n\n        var sorted = sortObject(this.data);\n        var start = len - 7;\n        this.res.val = {\n          \"6mm\": 0,\n          \"dust\": 0,\n          \"10mm\": 0,\n          \"20mm\": 0,\n          \"30mm\": 0\n        };\n\n        for (var i = start[\"index\"]; i < len; i++) {\n          this.res[\"val\"][\"6mm\"] += this.state.data[keys[i]][\"6mm\"];\n          this.res[\"val\"][\"dust\"] += this.state.data[keys[i]][\"dust\"];\n          this.res[\"val\"][\"20mm\"] += this.state.data[keys[i]][\"20mm\"];\n          this.res[\"val\"][\"10mm\"] += this.state.data[keys[i]][\"10mm\"];\n          this.res[\"val\"][\"30mm\"] += this.state.data[keys[i]][\"30mm\"];\n        }\n\n        this.res[\"val\"][\"6mm\"] = this.res[\"val\"][\"6mm\"] / 7;\n        this.res[\"val\"][\"dust\"] = this.res[\"val\"][\"dust\"] / 7;\n        this.res[\"val\"][\"20mm\"] = this.res[\"val\"][\"20mm\"] / 7;\n        this.res[\"val\"][\"10mm\"] = this.res[\"val\"][\"10mm\"] / 7;\n        this.res[\"val\"][\"30mm\"] = this.res[\"val\"][\"30mm\"] / 7;\n        this.setState({\n          y: Object.values(this.res.val)\n        });\n        console.log(this.state.data);\n        this.res.message = \"The forcasts are:\";\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n    var self = this;\n    setInterval(function () {\n      self.getData();\n    }, 5000);\n  }\n\n  render() {\n    var style = {\n      border: \"1px solid #ccc\"\n    };\n    var head = [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }\n    }, this.res.message, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      style: style,\n      h: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\n      r: this.state.y,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 22\n      }\n    })));\n  }\n\n}\n\nexport default ForecastVal;","map":{"version":3,"sources":["D:/react_crash_course/frontend/src/components/forecastval.jsx"],"names":["React","Component","Table","ForecastVal","state","x","y","data","props","response","val","message","res","getData","event","keys","Object","len","length","values","sortObject","o","sort","reduce","r","k","sorted","start","i","setState","console","log","componentDidMount","self","setInterval","render","style","border","head"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport Table from \"./table\";\r\nimport \"./table.css\"\r\nclass ForecastVal extends Component {\r\n    state = {\r\n        x: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\r\n        y: [\"ud\", \"ud\", \"ud\", \"ud\", \"ud\"],\r\n        data: this.props.data,\r\n        response: {\r\n            val: null,\r\n            message: null,\r\n        }\r\n    };\r\n    data = this.props.data;\r\n    res = { \"val\": null, message: null };\r\n\r\n    getData = (event) => {\r\n        var keys = Object.keys(this.props.data);\r\n        var len = keys.length;Object.values\r\n        // console.log(this.props.data)\r\n        // console.log(len)\r\n        if (len < 7) {\r\n            this.res.message = \"Not enough data to forecast\";\r\n        }\r\n        else {\r\n            const sortObject = o => Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {})\r\n            var sorted = sortObject(this.data);\r\n            var start = len - 7;\r\n            this.res.val = { \"6mm\": 0, \"dust\": 0, \"10mm\": 0, \"20mm\": 0, \"30mm\": 0 }\r\n            for (var i = start[\"index\"]; i < len; i++) {\r\n                this.res[\"val\"][\"6mm\"] += this.state.data[keys[i]][\"6mm\"]\r\n                this.res[\"val\"][\"dust\"] += this.state.data[keys[i]][\"dust\"]\r\n                this.res[\"val\"][\"20mm\"] += this.state.data[keys[i]][\"20mm\"]\r\n                this.res[\"val\"][\"10mm\"] += this.state.data[keys[i]][\"10mm\"]\r\n                this.res[\"val\"][\"30mm\"] += this.state.data[keys[i]][\"30mm\"]\r\n            }\r\n            this.res[\"val\"][\"6mm\"] = this.res[\"val\"][\"6mm\"] / 7;\r\n            this.res[\"val\"][\"dust\"] = this.res[\"val\"][\"dust\"] / 7;\r\n            this.res[\"val\"][\"20mm\"] = this.res[\"val\"][\"20mm\"] / 7;\r\n            this.res[\"val\"][\"10mm\"] = this.res[\"val\"][\"10mm\"] / 7;\r\n            this.res[\"val\"][\"30mm\"] = this.res[\"val\"][\"30mm\"] / 7;\r\n            this.setState({ y: Object.values(this.res.val) })\r\n            console.log(this.state.data);\r\n            this.res.message = \"The forcasts are:\"\r\n\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.getData();\r\n        var self = this;\r\n        setInterval(function () { self.getData() }, 5000);\r\n    }\r\n    render() {\r\n        var style = {\r\n            border: \"1px solid #ccc\"\r\n        }\r\n        var head = [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"]\r\n        return (\r\n            <div>{this.res.message}\r\n                <div><Table style={style} h={[\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"]} r={this.state.y} /></div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\nexport default ForecastVal;"]},"metadata":{},"sourceType":"module"}