{"ast":null,"code":"var _jsxFileName = \"D:\\\\frontend\\\\frontend\\\\src\\\\components\\\\forecastval.jsx\";\nimport React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Table from \"./table\";\nimport \"./table.css\";\n\nclass ForecastVal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      x: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\n      y: [\"ud\", \"ud\", \"ud\", \"ud\", \"ud\"]\n    };\n    this.data = this.props.data;\n    this.res = {\n      \"val\": null,\n      message: null\n    };\n\n    this.getData = event => {\n      var keys = Object.keys(this.props.data);\n      var len = keys.length; // console.log(this.props.data)\n      // console.log(len)\n\n      if (len < 7) {\n        this.res.message = \"Not enough data to forecast\";\n      } else {\n        const sortObject = o => Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {});\n\n        var sorted = sortObject(this.data);\n        var start = len - 7;\n        this.res.val = {\n          \"6mm\": 0,\n          \"dust\": 0,\n          \"10mm\": 0,\n          \"20mm\": 0,\n          \"30mm\": 0\n        };\n\n        for (var i = start[\"index\"]; i < len; i++) {\n          this.res[\"val\"][\"6mm\"] += this.sorted[i][\"6mm\"];\n          this.res[\"val\"][\"dust\"] += this.sorted[i][\"dust\"];\n          this.res[\"val\"][\"20mm\"] += this.sorted[i][\"20mm\"];\n          this.res[\"val\"][\"10mm\"] += this.sorted[i][\"10mm\"];\n          this.res[\"val\"][\"30mm\"] += this.sorted[i][\"30mm\"];\n        }\n\n        this.res[\"val\"][\"6mm\"] = this.res[\"val\"][\"6mm\"] / 7;\n        this.res[\"val\"][\"dust\"] = this.res[\"val\"][\"dust\"] / 7;\n        this.res[\"val\"][\"20mm\"] = this.res[\"val\"][\"20mm\"] / 7;\n        this.res[\"val\"][\"10mm\"] = this.res[\"val\"][\"10mm\"] / 7;\n        this.res[\"val\"][\"30mm\"] = this.res[\"val\"][\"30mm\"] / 7;\n        this.setState({\n          y: this.res.val.values\n        });\n        this.res.message = \"The forcasts are:\";\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n    var self = this;\n    setInterval(function () {\n      self.getData();\n    }, 5000);\n  }\n\n  render() {\n    var style = {\n      border: \"1px solid #ccc\"\n    };\n    var head = [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }\n    }, this.res.message, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      style: style,\n      h: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\n      r: this.state.y,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 14\n      }\n    })));\n  }\n\n}\n\nexport default ForecastVal;","map":{"version":3,"sources":["D:/frontend/frontend/src/components/forecastval.jsx"],"names":["React","Component","Table","ForecastVal","state","x","y","data","props","res","message","getData","event","keys","Object","len","length","sortObject","o","sort","reduce","r","k","sorted","start","val","i","setState","values","componentDidMount","self","setInterval","render","style","border","head"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport Table from \"./table\";\r\nimport \"./table.css\"\r\nclass ForecastVal extends Component {\r\n    state={\r\n        x:[\"6mm\",\"dust\",\"10mm\",\"20mm\",\"30mm\"],\r\n        y:[\"ud\",\"ud\",\"ud\",\"ud\",\"ud\"]\r\n    };\r\n    data = this.props.data;\r\n    res = {\"val\":null,message:null};\r\n    \r\n    getData = (event) =>{\r\n        var keys = Object.keys(this.props.data);\r\n        var len = keys.length;\r\n        // console.log(this.props.data)\r\n        // console.log(len)\r\n        if (len<7){\r\n            this.res.message = \"Not enough data to forecast\";\r\n        }\r\n        else{\r\n            const sortObject = o => Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {})\r\n            var sorted = sortObject(this.data);\r\n            var start = len-7;\r\n            this.res.val = {\"6mm\":0,\"dust\":0,\"10mm\":0,\"20mm\":0,\"30mm\":0}\r\n            for(var i = start[\"index\"]; i < len; i++){\r\n                this.res[\"val\"][\"6mm\"]+=this.sorted[i][\"6mm\"]\r\n                this.res[\"val\"][\"dust\"]+=this.sorted[i][\"dust\"]\r\n                this.res[\"val\"][\"20mm\"]+=this.sorted[i][\"20mm\"]\r\n                this.res[\"val\"][\"10mm\"]+=this.sorted[i][\"10mm\"]\r\n                this.res[\"val\"][\"30mm\"]+=this.sorted[i][\"30mm\"]\r\n            }\r\n            this.res[\"val\"][\"6mm\"] = this.res[\"val\"][\"6mm\"]/7;\r\n            this.res[\"val\"][\"dust\"] = this.res[\"val\"][\"dust\"]/7;\r\n            this.res[\"val\"][\"20mm\"] = this.res[\"val\"][\"20mm\"]/7;\r\n            this.res[\"val\"][\"10mm\"] = this.res[\"val\"][\"10mm\"]/7;\r\n            this.res[\"val\"][\"30mm\"] = this.res[\"val\"][\"30mm\"]/7;\r\n            this.setState({y:this.res.val.values})\r\n            this.res.message=\"The forcasts are:\"\r\n\r\n        }\r\n    }\r\n    componentDidMount(){\r\n        this.getData();\r\n        var self = this;\r\n        setInterval(function(){self.getData()}, 5000);\r\n    }\r\n    render(){\r\n        var style = {\r\n            border: \"1px solid #ccc\"\r\n        }\r\n        var head = [\"6mm\",\"dust\",\"10mm\",\"20mm\",\"30mm\"]\r\n        return (\r\n        <div>{this.res.message}\r\n        <div><Table style = {style} h={[\"6mm\",\"dust\",\"10mm\",\"20mm\",\"30mm\"]} r={this.state.y}/></div>\r\n        </div>\r\n        \r\n        );\r\n    }\r\n}\r\nexport default ForecastVal;"]},"metadata":{},"sourceType":"module"}