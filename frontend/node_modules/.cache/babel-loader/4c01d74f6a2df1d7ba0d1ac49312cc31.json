{"ast":null,"code":"var _jsxFileName = \"D:\\\\react_crash_course\\\\frontend\\\\src\\\\components\\\\forecastval.jsx\";\nimport React, { Component } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport Table from \"./table\";\nimport \"./table.css\";\n\nclass ForecastVal extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      x: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\n      y: [\"ud\", \"ud\", \"ud\", \"ud\", \"ud\"],\n      data: this.props.data\n    };\n    this.data = this.props.data;\n    this.res = {\n      \"val\": null,\n      message: null\n    };\n\n    this.getData = event => {\n      var keys = Object.keys(this.props.data);\n      var len = keys.length; // console.log(this.props.data)\n      // console.log(len)\n\n      if (len < 7) {\n        this.res.message = \"Not enough data to forecast\";\n      } else {\n        console.log(this.state.data);\n\n        const sortObject = o => Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {});\n\n        var sorted = sortObject(this.data);\n        var start = len - 7;\n        console.log(start);\n        this.res.val = {\n          \"6mm\": 0,\n          \"dust\": 0,\n          \"10mm\": 0,\n          \"20mm\": 0,\n          \"30mm\": 0\n        };\n\n        for (var i = start; i < len; i++) {\n          this.res[\"val\"][\"6mm\"] += this.props.data[keys[i]][\"6mm\"];\n          this.res[\"val\"][\"dust\"] += this.props.data[keys[i]][\"dust\"];\n          this.res[\"val\"][\"20mm\"] += this.props.data[keys[i]][\"20mm\"];\n          this.res[\"val\"][\"10mm\"] += this.props.data[keys[i]][\"10mm\"];\n          this.res[\"val\"][\"30mm\"] += this.props.data[keys[i]][\"30mm\"];\n        } // console.log(this.res.val)\n\n\n        this.res[\"val\"][\"6mm\"] = (Math.round(this.res[\"val\"][\"6mm\"] / 7 * 100) / 100).toFixed(2);\n        this.res[\"val\"][\"dust\"] = (Math.round(this.res[\"val\"][\"dust\"] / 7 * 100) / 100).toFixed(2);\n        this.res[\"val\"][\"20mm\"] = (Math.round(this.res[\"val\"][\"20mm\"] / 7 * 100) / 100).toFixed(2);\n        this.res[\"val\"][\"10mm\"] = (Math.round(this.res[\"val\"][\"10mm\"] / 7 * 100) / 100).toFixed(2);\n        this.res[\"val\"][\"30mm\"] = (Math.round(this.res[\"val\"][\"30mm\"] / 7 * 100) / 100).toFixed(2); // console.log(this.res.val)\n\n        console.log(Object.values(this.res.val));\n        this.setState({\n          y: Object.values(this.res.val)\n        });\n        console.log(this.state);\n        this.res.message = \"The forcasts are:\";\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.getData();\n    var self = this;\n    setInterval(function () {\n      self.getData();\n    }, 1000);\n  }\n\n  render() {\n    var style = {\n      border: \"1px solid #ccc\"\n    };\n    var head = [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"];\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 13\n      }\n    }, this.res.message, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Table, {\n      style: style,\n      h: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\n      r: this.state.y,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 22\n      }\n    })));\n  }\n\n}\n\nexport default ForecastVal;","map":{"version":3,"sources":["D:/react_crash_course/frontend/src/components/forecastval.jsx"],"names":["React","Component","Table","ForecastVal","state","x","y","data","props","res","message","getData","event","keys","Object","len","length","console","log","sortObject","o","sort","reduce","r","k","sorted","start","val","i","Math","round","toFixed","values","setState","componentDidMount","self","setInterval","render","style","border","head"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport Table from \"./table\";\r\nimport \"./table.css\"\r\nclass ForecastVal extends Component {\r\n    state = {\r\n        x: [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"],\r\n        y: [\"ud\", \"ud\", \"ud\", \"ud\", \"ud\"],\r\n        data: this.props.data\r\n    };\r\n    data = this.props.data;\r\n    res = { \"val\": null, message: null };\r\n\r\n    getData = (event) => {\r\n        var keys = Object.keys(this.props.data);\r\n        var len = keys.length;\r\n        // console.log(this.props.data)\r\n        // console.log(len)\r\n        if (len < 7) {\r\n            this.res.message = \"Not enough data to forecast\";\r\n        }\r\n        else {\r\n            console.log(this.state.data)\r\n            const sortObject = o => Object.keys(o).sort().reduce((r, k) => (r[k] = o[k], r), {})\r\n            var sorted = sortObject(this.data);\r\n            var start = len - 7;\r\n            console.log(start)\r\n            this.res.val = { \"6mm\": 0, \"dust\": 0, \"10mm\": 0, \"20mm\": 0, \"30mm\": 0 }\r\n            for (var i = start; i < len; i++) {\r\n                this.res[\"val\"][\"6mm\"] += this.props.data[keys[i]][\"6mm\"]\r\n                this.res[\"val\"][\"dust\"] += this.props.data[keys[i]][\"dust\"]\r\n                this.res[\"val\"][\"20mm\"] += this.props.data[keys[i]][\"20mm\"]\r\n                this.res[\"val\"][\"10mm\"] += this.props.data[keys[i]][\"10mm\"]\r\n                this.res[\"val\"][\"30mm\"] += this.props.data[keys[i]][\"30mm\"]\r\n            }\r\n            // console.log(this.res.val)\r\n            this.res[\"val\"][\"6mm\"] = (Math.round(this.res[\"val\"][\"6mm\"] / 7 * 100) / 100).toFixed(2);\r\n            this.res[\"val\"][\"dust\"] = (Math.round(this.res[\"val\"][\"dust\"] / 7 * 100) / 100).toFixed(2);\r\n            this.res[\"val\"][\"20mm\"] = (Math.round(this.res[\"val\"][\"20mm\"] / 7 * 100) / 100).toFixed(2);\r\n            this.res[\"val\"][\"10mm\"] = (Math.round(this.res[\"val\"][\"10mm\"] / 7 * 100) / 100).toFixed(2);\r\n            this.res[\"val\"][\"30mm\"] = (Math.round(this.res[\"val\"][\"30mm\"] / 7 * 100) / 100).toFixed(2);\r\n            // console.log(this.res.val)\r\n            console.log(Object.values(this.res.val))\r\n            this.setState({ y: Object.values(this.res.val) })\r\n            console.log(this.state);\r\n            this.res.message = \"The forcasts are:\"\r\n\r\n        }\r\n    }\r\n    componentDidMount() {\r\n        this.getData();\r\n        var self = this;\r\n        setInterval(function () { self.getData() }, 1000);\r\n    }\r\n    render() {\r\n        var style = {\r\n            border: \"1px solid #ccc\"\r\n        }\r\n        var head = [\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"]\r\n        return (\r\n            <div>{this.res.message}\r\n                <div><Table style={style} h={[\"6mm\", \"dust\", \"10mm\", \"20mm\", \"30mm\"]} r={this.state.y} /></div>\r\n            </div>\r\n\r\n        );\r\n    }\r\n}\r\nexport default ForecastVal;"]},"metadata":{},"sourceType":"module"}